<!DOCTYPE html>
<html>
<meta charset="utf-8"/>
<link rel="stylesheet" href="../script/normalize.css" type="text/css"/>
<link href="../script/nvd3/src/nv.d3.css" rel="stylesheet" type="text/css"/>

<title>Genoa Port Statistics - Port Traffic</title>

<style>
*{font-family:Helvetica;color:black;padding:3px;}
h1,h3,a{color:#5b8fc9;}

text {
  font: 12px sans-serif;
}

#chart1 svg,
#chart2 svg,
#chart3 svg,
#chart4 svg {
display: block;
  height: 500px;
  min-width: 100px;
  min-height: 100px;
  max-width:1280px;
}
  .entry{
	-moz-border-radius: 10px;
    border-radius: 10px;
    border:2px solid #ddeeff;
    padding:5px;
    margin:5px;
  }
</style>
</head>

<body>
<a href="../index.html" class="entry">Indice</a>
<h1>Traffico mensile</h1>
<p><a href="MonthStatsPort.ods">Spreadsheet ODS</a></p>
  <div id="chart1">
    <svg></svg>
  </div>
    <div id="chart2">
    <svg></svg>
  </div>
    <div id="chart3">
    <svg></svg>
  </div> 
  <div id="chart4">
    <svg></svg>
  </div>

<script src="../script/nvd3/lib/d3.v3.min.js"></script>
<script src="../script/nvd3/nv.d3.min.js"></script>
<script src="../script/nvd3/src/tooltip.js"></script>
<script src="../script/nvd3/src/utils.js"></script>
<script src="../script/nvd3/src/models/legend.js"></script>
<script src="../script/nvd3/src/models/axis.js"></script>
<script src="../script/nvd3/src/models/multiBarChart.js"></script>
<script>

d3.json('arrivi.json', function(data) {
	
	nv.addGraph(function() {
	  chart = nv.models.multiBarChart()
	                      .x(function(d) { return d[0] })
                    .y(function(d) { return d[1] })
                    .clipEdge(true);
		chart.margin({left: 100}) 

	  chart.xAxis
			.axisLabel('Mese')
		  .tickFormat();

	  chart.yAxis
		  .axisLabel('Navi')
		  .tickFormat(d3.format('d'));
	
		chart.forceY([0, 750]);
//chart.reduceXTicks(false);
	  d3.select('#chart1 svg')
		  .datum(data)
		.transition().duration(500)
		  .call(chart);

	  nv.utils.windowResize(chart.update);

	  return chart;
	});
});

d3.json('tsl.json', function(data) {
	
	nv.addGraph(function() {
	  chart = nv.models.multiBarChart()
	                      .x(function(d) { return d[0] })
                    .y(function(d) { return d[1] })
                    .clipEdge(true);
		chart.margin({left: 100}) 

	  chart.xAxis
			.axisLabel('Mese')
		  .tickFormat();

	  chart.yAxis
		  .axisLabel('Stazza Lorda')
		  .tickFormat(d3.format('d'));
	
		chart.forceY([10000000, 20000000]);
chart.reduceXTicks(false);
	  d3.select('#chart2 svg')
		  .datum(data)
		.transition().duration(500)
		  .call(chart);

	  nv.utils.windowResize(chart.update);

	  return chart;
	});
});

d3.json('passeggeri.json', function(data) {
	
	nv.addGraph(function() {
	  chart = nv.models.multiBarChart()
	                      .x(function(d) { return d[0] })
                    .y(function(d) { return d[1] })
                    .clipEdge(true);
		chart.margin({left: 100}) 

	  chart.xAxis
			.axisLabel('Mese')
		  .tickFormat();

	  chart.yAxis
		  .axisLabel('Passeggeri')
		  .tickFormat(d3.format('d'));
//chart.reduceXTicks(false);

	  d3.select('#chart3 svg')
		  .datum(data)
		.transition().duration(500)
		  .call(chart);

	  nv.utils.windowResize(chart.update);

	  return chart;
	});
});

d3.json('tonstraffic.json', function(data) {
	
	nv.addGraph(function() {
	  chart = nv.models.stackedAreaChart()
                    .x(function(d) { 
					//var m={"GEN12":1,"FEB12":2,"MAR12":3,"APR12":4,"MAG12":5,"GIU12":6,"LUG12":7,"AGO12":8,"SET12":9,"OTT12":10,"NOV12":11,"DIC12":12,"GEN13":13,"FEB13":14,"MAR13":15,"APR13":16,"MAG13":17,"GIU13":18,"LUG13":19,"AGO13":20,"SET13":21,"OTT13":22,"NOV13":23};
					var dat=Date.parse(d[0]);
					
							return dat; })
                    .y(function(d) { return d[1] })
                    .clipEdge(true);

		chart.margin({left: 100}) 

	  chart.xAxis
			.axisLabel('Mese')
		  .tickFormat(function(d) {
		  return d3.time.format('%b %y')(new Date(d));
					//var m=["GEN12","FEB12","MAR12","APR12","MAG12","GIU12","LUG12","AGO12","SET12","OTT12","NOV12","DIC12","GEN13","FEB13","MAR13","APR13","MAG13","GIU13","LUG13","AGO13","SET13","OTT13","NOV13"];
				//return (d.getMonth()+ 1)+" "+d.getYear();
							//return m[d-1];
							});
	  chart.yAxis
		  .axisLabel('Tonnellate')
		  .tickFormat(d3.format('d'));

	  d3.select('#chart4 svg')
		  .datum(data)
		.transition().duration(500)
		  .call(chart);

	  nv.utils.windowResize(chart.update);

	  return chart;
	});
});
</script>
</body>
